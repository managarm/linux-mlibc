sources:
  - name: autoconf-archive
    subdir: ports
    git: 'https://github.com/autoconf-archive/autoconf-archive.git'
    tag: 'v2019.01.06'
    version: '2019.01.06'

tools:
  - name: cross-autoconf-archive
    architecture: '@OPTION:arch@'
    from_source: autoconf-archive
    exports_aclocal: true
    revision: 1
    install:
      - args: ['mkdir', '-p', '@BUILD_ROOT@/tools/cross-autoconf-archive/share/']
      - args: ['cp', '-r', '@THIS_SOURCE_DIR@/m4', '@BUILD_ROOT@/tools/cross-autoconf-archive/share/aclocal']

  - name: cross-autoconf-v2.71
    labels: [aarch64, riscv64]
    architecture: noarch
    source:
      name: autoconf-v2.71
      subdir: 'ports'
      git: 'https://https.git.savannah.gnu.org/git/autoconf.git'
      tag: 'v2.71'
      version: '2.71'
      sources_required:
        - gnuconfig
        - gnulib
      tools_required:
        - cross-autoconf-v2.69
        - cross-automake-v1.15
      regenerate:
        - args: ['cp', '@SOURCE_ROOT@/ports/gnuconfig/config.sub', '@THIS_SOURCE_DIR@/lib/']
        - args: ['cp', '@SOURCE_ROOT@/ports/gnuconfig/config.guess', '@THIS_SOURCE_DIR@/lib/']
        - args: ['python3', '@SOURCE_ROOT@/scripts/checkout-gnulib.py', '@SOURCE_ROOT@/ports/gnulib']
        - args: ['autoreconf', '-fvi']
    revision: 1
    configure:
      - args: ['@THIS_SOURCE_DIR@/configure', '--prefix=@PREFIX@']
    compile:
      - args: ['make', '-j@PARALLELISM@']
    install:
      - args: ['make', 'install']
