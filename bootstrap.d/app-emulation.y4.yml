sources:
  - name: qemu
    subdir: 'ports'
    git: 'https://github.com/qemu/qemu.git'
    tag: 'v9.2.3'
    version: '9.2.3'

tools:
  - name: host-qemu
    labels: [aarch64, riscv64, not-on-xbbs]
    architecture: noarch
    containerless: true
    from_source: qemu
    revision: 1
    configure:
      - args:
        - '@THIS_SOURCE_DIR@/configure'
        - '--prefix=@PREFIX@'
        - '--target-list=x86_64-softmmu,aarch64-softmmu,riscv64-softmmu'
        - '--disable-werror'
        - '--extra-cflags=-march=native'
        - '--enable-opengl'
        - '--enable-virglrenderer'
        - '--enable-gtk'
        - '--enable-sdl'
        - '--enable-trace-backends=log'
        environ:
          CFLAGS: '-Wno-int-conversion'
    compile:
      - args: ['ninja']
    install:
      - args: ['ninja', 'install']